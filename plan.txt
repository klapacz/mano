# Sync

1. Fetch notes from the server (older than the last sync)
2. Rebase on the local notes (update id for tracking rebases?)
3. Push local notes to the server

1. Initial state: Both clients synced at time 0
2. Client A creates "note 1" at time 1000 locally
3. Client B creates "note 2" at time 2000 locally
4. Client B syncs at time 3000:
   - Uploads "note 2" to server
   - Sets lastSync = 3000
5. Client A syncs at time 4000:
   - Uploads "note 1" to server
   - Sets lastSync = 4000
6. Client B syncs again at time 5000:
   - Looks for notes updated after time 3000
   - Should receive "note 1" because it was added to the server at time 4000

But here's where the problem occurs: If the server is storing "note 1" with its original client-side timestamp of 1000 (rather than when it reached the server), then Client B won't see it because it's looking for notes with timestamps > 3000.
